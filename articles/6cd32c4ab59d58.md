---
title: "ãƒªãƒƒãƒãªã‚¿ãƒ¼ãƒŸãƒŠãƒ«æç”»ã‚’å®Ÿç¾ï¼ Lip Glossã®ã‚¹ã‚¹ãƒ¡(ã–ã£ãã‚Šã§ãã‚‹ã“ã¨ç·¨)"
emoji: "ğŸ’„"
type: "tech"
topics:
  - "go"
  - "terminal"
  - "tui"
  - "cui"
  - "lipgloss"
published: true
published_at: "2023-10-22 23:30"
publication_name: "kurusugawa"
---

:::message
å‰ã«æ›¸ã„ãŸBubble Teaã®è¨˜äº‹ã‚‚è¦‹ã¦ã­ã€‚
https://zenn.dev/kurusugawa/articles/ce4e838bbd2ec3
:::

ã“ã®è¨˜äº‹ã§ã¯ã€Lip Glossã§ã§ãã‚‹ã“ã¨ã‚’ã€ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’ç¤ºã—ã¦ã–ã£ãã‚Šç´¹ä»‹ã—ã¾ã™ã€‚

## Lip Gloss(lipgloss) ã¨ã¯

Lip Glossã¯ã€Goã§æ›¸ã‹ã‚ŒãŸTUIç”¨ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãªè£…é£¾ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ãƒ†ã‚­ã‚¹ãƒˆã«é©ç”¨ã§ãã¾ã™ã€‚

![lipgloss](https://camo.githubusercontent.com/5ed63e6b61ddcea9575c0b0eefd373c8f085f4594e323fe60c39ce3bbcc27d81/68747470733a2f2f73747566662e636861726d2e73682f6c6970676c6f73732f6c6970676c6f73732d6578616d706c652e706e67)

[Lip Glossã®GitHubãƒªãƒã‚¸ãƒˆãƒªã‚ˆã‚Šå¼•ç”¨](https://camo.githubusercontent.com/5ed63e6b61ddcea9575c0b0eefd373c8f085f4594e323fe60c39ce3bbcc27d81/68747470733a2f2f73747566662e636861726d2e73682f6c6970676c6f73732f6c6970676c6f73732d6578616d706c652e706e67)

ä»¥ä¸‹ã®ã‚ˆã†ãªé …ç›®ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

- æ–‡å­—è‰²
- èƒŒæ™¯è‰²
- æ–‡å­—å¯„ã›
- æ–‡å­—å›²ã¿
- ç‰¹å®šå¹…ã§ã®æŠ˜è¿”ã—
- ãªã©ãªã©...

ä»¥å‰ç´¹ä»‹ã—ãŸBubble Teaã‚’æä¾›ã—ã¦ã„ã‚‹Charmã¨ã„ã†ãƒãƒ¼ãƒ ãŒé–‹ç™ºã—ã¦ã„ã¾ã™ã€‚
ãã®ãŸã‚ã€Bubble Teaã‚’ç”¨ã„ãŸTUIã‚¢ãƒ—ãƒªã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã«å‡ã‚ŠãŸã„å ´åˆã€Lip GlossãŒç¬¬ä¸€å€™è£œã«ãªã‚Šã¾ã™ã€‚

ã†ã¾ãä½¿ã„ã“ãªã™ã¨ã€ã“ã‚“ãªæ„Ÿã˜ã®ã‚¢ãƒ—ãƒªã‚’ä½œã‚Œã¾ã™ã€‚
(GitHubã®ãƒªãƒã‚¸ãƒˆãƒªã‚’æ¤œç´¢ã™ã‚‹TUIã‚¢ãƒ—ãƒª)

![Github Explorer](https://raw.githubusercontent.com/tbistr/github-explorer/main/demo.gif)

## Lip Glossã®å„æ©Ÿèƒ½ã®ç´¹ä»‹

ã§ãã‚‹ã“ã¨ã¨ã€ãã®ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’ã‚»ãƒƒãƒˆã§ç´¹ä»‹ã—ã¾ã™ã€‚

### `Style`å‹

`Style`å‹ã¯lipglossã®ãƒ¡ã‚¤ãƒ³ã®å‹ã§ã™ã€‚
ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³ã§ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚
`Render`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã¨ã€æ¸¡ã—ãŸæ–‡å­—åˆ—ã«ã‚¹ã‚¿ã‚¤ãƒ«ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚

(å„ã‚¹ã‚¿ã‚¤ãƒ«ã«ã¤ã„ã¦ã¯å¾Œè¿°ã—ã¾ã™)

```go
fmt.Println("# lipglossã§ã¯ã€styleå‹ã‚’ä½¿ã£ã¦æ–‡å­—åˆ—ã‚’è£…é£¾ã—ã¾ã™")
var style = lipgloss.NewStyle().
    Bold(true).
    Italic(true).
    Foreground(lipgloss.Color("#0079FF")).
    Background(lipgloss.Color("#F6FA70")).
    Width(40).
    Align(lipgloss.Center)

fmt.Println("## styleå‹ã®Renderãƒ¡ã‚½ãƒƒãƒ‰ã«æ–‡å­—åˆ—ã‚’æ¸¡ã™ã¨ã€è£…é£¾ã•ã‚ŒãŸæ–‡å­—åˆ—ãŒè¿”ã‚Šã¾ã™")
fmt.Println(style.Render("Hello, lipgloss!"))
```

çµæœã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![style.Renderã®çµæœ](https://storage.googleapis.com/zenn-user-upload/2c861283f0e9-20231022.png)

### æ–‡å­—ã€èƒŒæ™¯è‰²ã®è¨­å®š

`Color`å‹ã¯lipglossã§è‰²ã‚’è¡¨ç¾ã™ã‚‹å‹ã§ã™ã€‚
`Style`å‹ã®`Foreground`ãƒ¡ã‚½ãƒƒãƒ‰ã€`Background`ãƒ¡ã‚½ãƒƒãƒ‰ã«æ¸¡ã™ã“ã¨ã§ã€æ–‡å­—è‰²ã€èƒŒæ™¯è‰²ã‚’è¨­å®šã§ãã¾ã™ã€‚

åŸºæœ¬çš„ã«ã¯ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã§æŒ‡å®šã™ã‚‹ã¨ã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒåŠ¹ã„ãŸã‚Šã¨ä¾¿åˆ©ã§ã™ãŒã€ANSIã®4bit, 8bitã‚«ãƒ©ãƒ¼ã‚‚ä½¿ãˆã¾ã™ã€‚

```go
fmt.Println("# lipglossã‚’ä½¿ã£ã¦æ–‡å­—ã€èƒŒæ™¯ã«è‰²ã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™")

fmt.Println("## Colorå‹ã‚’ä½¿ã£ã¦è‰²ã‚’ä½œæˆã§ãã¾ã™")
blue := lipgloss.Color("#0079FF")
// 24bitã‚«ãƒ©ãƒ¼ä»¥å¤–ã«ã‚‚ã€4bit, 8bitã®ã‚«ãƒ©ãƒ¼ã‚‚ä½¿ãˆã¾ã™
// lipgloss.Color("5")

fmt.Println("## styleå‹ã®Foreground, Backgroundãƒ¡ã‚½ãƒƒãƒ‰ã«ã¯ã€Colorå‹ã§è‰²ã‚’æŒ‡å®šã—ã¾ã™")
fmt.Println(
    lipgloss.NewStyle().
        Foreground(lipgloss.Color("#F6FA70")).
        Background(blue).
        Render("Colored text!"),
)
```

çµæœã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![æ–‡å­—ã€èƒŒæ™¯è‰²ã®è¨­å®š](https://storage.googleapis.com/zenn-user-upload/eb9a020d8722-20231022.png)

### ãƒ†ã‚­ã‚¹ãƒˆã®å½¢å¼è¨­å®š

ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¤ã‚¿ãƒªãƒƒã‚¯ä½“ã€åè»¢ã€å¤ªå­—ãªã©ã«ã§ãã¾ã™ã€‚
ãã‚Œãã‚Œã€`Italic`, `Reverse`, `Bold`, `Underline`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚
(ãƒ•ã‚©ãƒ³ãƒˆãŒå¯¾å¿œã—ã¦ã„ãªã„å ´åˆã€é€šå¸¸è¡¨ç¤ºã«ãªã‚Šã¾ã™)

```go
fmt.Println("# ãƒ†ã‚­ã‚¹ãƒˆã®å½¢å¼ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™")
fmt.Println(lipgloss.NewStyle().
    Bold(true).Render("Bold text."))
fmt.Println(lipgloss.NewStyle().
    Italic(true).Render("Italic text."))
fmt.Println(lipgloss.NewStyle().
    Reverse(true).Render("Reversed text."))
fmt.Println(lipgloss.NewStyle().
    Underline(true).Render("Underlined text."))
```

çµæœã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![text_style](https://storage.googleapis.com/zenn-user-upload/729a494a9650-20231022.png)

### ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒãƒ¼ã‚¸ãƒ³ã®è¨­å®š

CSSã®ã‚ˆã†ã«ã€ãƒ†ã‚­ã‚¹ãƒˆã®å‘¨ã‚Šã«ä½™ç™½ã‚’è¨­ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
`Padding`ãƒ¡ã‚½ãƒƒãƒ‰ã€`Margin`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚

`Padding~`, `Margin~`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ã€ä¸Šä¸‹å·¦å³åˆ¥ã€…ã«å€¤ã‚’æŒ‡å®šã§ãã¾ã™ã€‚
ã¾ãŸã€`Padding`, `Margin`ãƒ¡ã‚½ãƒƒãƒ‰ã«CSSã¨åŒã˜æ›¸å¼ã§ã¾ã¨ã‚ã¦æŒ‡å®šã§ãã¾ã™ã€‚
(ä¾‹ä»¥å¤–ã«ã‚‚è‰²ã€…ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§æ¸¡ã›ã¾ã™)

```go
fmt.Println("# CSSã®ã‚ˆã†ã«ã€ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚„ãƒãƒ¼ã‚¸ãƒ³ã‚’æŒ‡å®šã§ãã¾ã™")

// ä¸Šä¸‹å·¦å³ã«2æ–‡å­—åˆ†ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°
fmt.Println(lipgloss.NewStyle().Background(blue).
    Padding(2).Render("Padding text."))
// ä¸Šä¸‹å·¦å³ã«2æ–‡å­—åˆ†ãƒãƒ¼ã‚¸ãƒ³
fmt.Println(lipgloss.NewStyle().Background(blue).
    Margin(2).Render("Margin text."))

fmt.Println("## ä¸Šä¸‹å·¦å³ã«åˆ¥ã€…ã®å€¤ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™")
fmt.Println(
    lipgloss.NewStyle().Background(blue).
        PaddingTop(1).
        PaddingRight(2).
        PaddingBottom(1).
        PaddingLeft(2).
        Render("Complex padding text."),
)
fmt.Println(
    lipgloss.NewStyle().Background(blue).
        Margin(1, 2, 1, 2). // ã¾ã¨ã‚ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™(CSSã¨åŒã˜æ›¸å¼)
        Render("Complex margin text."),
)
```

çµæœã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![Paddin, margin](https://storage.googleapis.com/zenn-user-upload/37d04e7d8157-20231022.png)

### é«˜ã•ã€å¹…ã®è¨­å®š

`Width`, `Height`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ã€æ–‡å­—åˆ—ã‚’æç”»ã™ã‚‹é ˜åŸŸã®ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã§ãã¾ã™ã€‚
æ–‡å­—åˆ—ãŒã¯ã¿å‡ºã‚‹ã¨è‡ªå‹•ã§æŠ˜ã‚Šè¿”ã•ã‚Œã¾ã™ã€‚

ã¾ãŸ`MaxWidth`, `MaxHeight`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ã€æ–‡å­—åˆ—ã‚’æç”»ã™ã‚‹é ˜åŸŸã®æœ€å¤§ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã§ãã¾ã™ã€‚

```go
fmt.Println("# æ–‡å­—åˆ—ã‚’æç”»ã™ã‚‹é ˜åŸŸã®ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã§ãã¾ã™")
fmt.Println(
    lipgloss.NewStyle().Background(blue).
        Width(15).
        Height(3).
        Render("hoge"),
)

fmt.Println("## æ–‡å­—åˆ—ãŒã¯ã¿å‡ºã‚‹ã¨è‡ªå‹•ã§æŠ˜ã‚Šè¿”ã•ã‚Œã¾ã™(ã—ã‹ã‚‚è‹±èªã®å ´åˆå˜èªå˜ä½ã§ã„ã„æ„Ÿã˜ã«)ãŒã€é«˜ã•ã¯å¤‰ã‚ã‚Šã¾ã™")
fmt.Println(lipgloss.NewStyle().Background(blue).
    Width(15).
    Height(3).
    Render("lolem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."),
)
```

çµæœã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
![text size](https://storage.googleapis.com/zenn-user-upload/b400329bd33b-20231022.png)

### æ–‡å­—å¯„ã›ã®è¨­å®š

é«˜ã•ã€å¹…ã‚’æŒ‡å®šã—ãŸå ´åˆã€ãã®ä¸­ã§ã®æ–‡å­—å¯„ã›ã‚’è¨­å®šã§ãã¾ã™ã€‚
`Align`ãƒ¡ã‚½ãƒƒãƒ‰ã«`lipgloss.Center`ç­‰ã®å®šæ•°ã‚’æŒ‡å®šã—ã¾ã™ã€‚

è¤‡æ•°è¨­å®šã™ã‚‹ã¨ã€å·¦ä¸‹ã€ä¸­å¤®ä¸Šãªã©ã®çµ„ã¿åˆã‚ã›ã‚‚æŒ‡å®šã§ãã¾ã™ã€‚

```go
fmt.Println("# æ–‡å­—åˆ—ã®æç”»ä½ç½®ã‚’æŒ‡å®šã§ãã¾ã™")
fmt.Println(
    lipgloss.NewStyle().Background(blue).
        Width(30).
        Align(lipgloss.Center).
        Render("Centered text."),
)
fmt.Println(
    lipgloss.NewStyle().Background(blue).![](https://storage.googleapis.com/zenn-user-upload/b400329bd33b-20231022.png)
        Width(30).
        Align(lipgloss.Right).
        Render("Right-aligned text."),
)

fmt.Println("## ä¸Šä¸‹ã®ä½ç½®ã‚‚æŒ‡å®šã§ãã¾ã™")
fmt.Println(
    lipgloss.NewStyle().Background(blue).
        Width(30).
        Height(3).
        Align(lipgloss.Bottom).
        Render("Bottom-aligned text."),
)
```

çµæœã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![align text](https://storage.googleapis.com/zenn-user-upload/2fd51d4ed22a-20231022.png)

### æ–‡å­—å›²ã¿ã®è¨­å®š

`Border`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ã€æ–‡å­—åˆ—ã‚’å›²ã‚€æ ç·šã‚’è¨­å®šã§ãã¾ã™ã€‚

```go
fmt.Println("# æ–‡å­—ã‚’å›²ã†æ ç·šã‚’æ›¸ãã“ã¨ã‚‚ã§ãã¾ã™")

fmt.Println(
    lipgloss.NewStyle().
        Border(lipgloss.NormalBorder()).
        Render("Bordered text."),
)
fmt.Println("## æ ç·šã«ã¯è‰²ã€…ãªç¨®é¡ãŒã‚ã‚Šã¾ã™ã—ã€è‡ªåˆ†ã§ä½œã‚‹ã“ã¨ã‚‚ã§ãã¾ã™")
fmt.Println(
    lipgloss.NewStyle().
        Border(lipgloss.DoubleBorder()).
        Render("Bordered text."),
)
```
![border](https://storage.googleapis.com/zenn-user-upload/9a467254deaf-20231022.png)

### é«˜ã•ã€å¹…ã‚’æ¸¬ã‚ŠãŸã„

`Width`, `Height`é–¢æ•°ã‚’ä½¿ã†ã¨ã€æ–‡å­—åˆ—ã‚’æç”»ã—ãŸã¨ãã®é«˜ã•ã€å¹…ã‚’æ¸¬ã‚Œã¾ã™ã€‚
`Size`é–¢æ•°ã‚’ä½¿ã†ã¨ä¸€ç·’ã«å–å¾—ã§ãã¾ã™ã€‚

è£ã§ã¯mattnã•ã‚“ã®[runewidth](https://github.com/mattn/go-runewidth)ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

```go
fmt.Println("# æ–‡å­—åˆ—ã®å¹…ã€é«˜ã•ã‚’å–å¾—ã§ãã¾ã™")
str := "Lip Gloss is great.ğŸ‘\n And cute.ğŸ±"
fmt.Println(str)

width := lipgloss.Width(str)
height := lipgloss.Height(str)
fmt.Printf("width: %d, height: %d\n", width, height)

width, height = lipgloss.Size("You can get the size of the string.")
fmt.Printf("width: %d, height: %d\n", width, height)
```

çµæœã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
![measure size](https://storage.googleapis.com/zenn-user-upload/62a3c833e6be-20231022.png)

## ã¾ã¨ã‚

Lip Glossã®æ©Ÿèƒ½ã‚’ã–ã£ãã‚Šç´¹ä»‹ã—ã¾ã—ãŸã€‚
ä»–ã«ã‚‚è‰²ã€…ãªæ©Ÿèƒ½ãŒã‚ã‚Šã€[Lip Glossã®GitHubãƒªãƒã‚¸ãƒˆãƒª](https://github.com/charmbracelet/lipgloss)ã‚„ã€[Lip Glossã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://pkg.go.dev/github.com/charmbracelet/lipgloss)ã«è©³ã—ãæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

ä»Šå¾ŒTUIã‚¢ãƒ—ãƒªã‚’ä½œã‚‹æ©Ÿä¼šãŒã‚ã‚Œã°ã€Lip Glossã‚’ä½¿ã£ã¦ã¿ã¦ãã ã•ã„ã€‚

## ãŠã¾ã‘

å®Ÿã¯ã€Lip Glossã¯Bubble TeaãŒã‚ˆãä½¿ã£ã¦ã„ã‚‹çµµæ–‡å­—ã‚’æ­£ã—ãè¡¨ç¤ºã§ãã¾ã›ã‚“!
[Bubblesã¨ã„ã†ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/charmbracelet/bubbles)ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹'ğŸ«§'ã¨ã„ã†çµµæ–‡å­—ã¯[æœ€è¿‘Unicodeã«è¿½åŠ ã•ã‚ŒãŸ](https://lets-emoji.com/bubbles-emoji/)ã‚‚ã®ã§ã€runewidthãŒã¾ã å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã§ã™ã€‚

![bubble](https://storage.googleapis.com/zenn-user-upload/6bb900c75d7f-20231022.png)

ä»¥ä¸‹ã®çµæœã¯`1, 2, 1`ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

![bug](https://storage.googleapis.com/zenn-user-upload/4216671b68c2-20231022.png)

ãŸã ã—ã€ç›¸å½“ãƒ¬ã‚¢ã‚±ãƒ¼ã‚¹ã§ã»ã¨ã‚“ã©ã®å ´åˆå¿ƒé…ã—ãªãã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚
(ã“ã®ãƒã‚°ã§çµæ§‹ãªæ™‚é–“ã‚’æº¶ã‹ã—ãŸã®ã§ã€å…±æœ‰ã—ã¦ã¿ã¾ã—ãŸ)

## ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆå…¨æ–‡

ã“ã®è¨˜äº‹ã§ç´¹ä»‹ã—ãŸæ©Ÿèƒ½ãŒç¢ºèªã§ãã‚‹ã‚³ãƒ¼ãƒ‰(ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ)ã§ã™ã€‚
ãã®ã¾ã¾å®Ÿè¡Œã§ãã¾ã™ã‹ã‚‰ã€æ‰‹å…ƒã§è‰²ã€…è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

@[gist](https://gist.github.com/tbistr/c1f72c1fbeb938ee18d4263a44c716d9)
